# Documentação do Projeto (TIDocs)

Esta pasta armazena a documentação do projeto para a disciplina de **Trabalho Interdisciplinar 1** dos cursos de Tecnologia da Informação da **[PUC Minas](https://pucminas.br)**. Essa documentação é estruturada na forma de um site que fica disponível por meio do GitHub Pages e pode ser incluído, também, no site da solução hospedada. Um [exemplo publicado do TIDocs](https://webtech-puc-minas.github.io/ti1-template/) está disponível por meio do repositório do **[WebTech PUC Minas](https://github.com/webtech-pucminas)**.

A documentação do projeto inclui as seguintes seções:

1. Introdução
2. Contexto
3. Concepção
4. Metodologia
5. Solução
6. FAQ (Questões frequentes)
7. Referências Bibliográficas

O template para o site é estruturado e permite que a equipe evolua a documentação do projeto à medida que avance no desenvolvimento.

---

# Introdução

O projeto tem como objetivo principal auxiliar pessoas na arte da culinária, fornecendo orientações para cozinhar de maneira simples, fácil, prática e eficiente, mesmo com ingredientes limitados ou reaproveitando os que já estão disponíveis em casa. Além disso, buscamos ajudar aqueles que precisam economizar dinheiro na compra de ingredientes para a preparação de alimentos e reduzir o desperdício de alimentos no dia a dia. Pretendemos criar uma comunidade culinária onde todos, independentemente de suas habilidades culinárias, possam aprender e compartilhar conhecimentos e experiências na cozinha.

## Informações Gerais

**Projeto:** KitchenCompanion
**Repositório GitHub:** [Gerador de Receitas](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas)
**Membros da equipe:**

- Thiago Branco de Oliveira
- Diogo Gouvêa Bastos Braga
- João Vitor Ferreira Jacinto
- Miguel Augusto de Paula

---

# Contexto

## Problema

Primeiramente, muitas pessoas frequentemente enfrentam dificuldades ao cozinhar com poucos ingredientes ou ao encontrar maneiras de reutilizar os ingredientes ou alimentos que já possuem, resultando em desperdício e gastos desnecessários. Logo, essa preocupação com os gastos tornou-se comum, pois muitos buscam economizar nas despesas com alimentos, mas raramente conseguem. Isso ocorre porque grande parte da população não possui o conhecimento necessário para preparar refeições simples, práticas, rápidas e básicas, ou não sabem por onde ou como aprender novas receitas. Assim, muitas vezes acabam recorrendo a aplicativos e serviços de entrega de comida (delivery), resultando em gastos desnecessários e prejudicando a própria saúde aos poucos, uma vez que a maioria das deliveries não oferecem comidas muito saudáveis. E mesmo quando oferecem, não é tão comum que as pessoas peçam comidas realmente saudáveis. 
Em segunda ordem, a mesma situação ocorre quando vão às compras,ou seja, muitas vezes as pessoas gastam muito dinheiro desnecessariamente com alimentos que não são saudáveis e que normalmente não precisam ser preparados para serem consumidos. 
Também, quanto ao desperdício de alimentos, além de ser infelizmente algo comum, também se tornou um problema sério, conforme apontado por uma pesquisa da Organização das Nações Unidas (ONU) em 2021. Esse tipo de descarte é o terceiro maior emissor de CO2 no mundo, contribuindo com aproximadamente 10% das emissões globais de gases de efeito estufa. 
Concluindo, o desperdício de alimentos também é uma questão ambiental crucial, e nosso projeto busca mitigar todos os problemas citados com base em uma solução de software.

## Objetivo

Certamente, o objetivo do projeto visa criar uma plataforma online (app/site web) que possa sugerir e gerar receitas com base nos ingredientes disponíveis para os usuários. Assim, auxiliando-os na preparação de pratos práticos, simples, básicos, rápidos, e o mais importante: saborosos e saudáveis. Além disso, a plataforma também oferecerá dicas extras sobre economia na cozinha, substituição de ingredientes, conservação de alimentos, reutilização saudável de alimentos, planejamento de refeições e muito mais. Dessa forma, não apenas ajudaremos os usuários a economizar dinheiro e reduzir o desperdício, mas também promovemos uma maior conscientização ambiental, responsabilidade e uma melhor qualidade de vida através de uma alimentação mais saudável.

## Justificativa

A criação do nosso projeto “KitchenCompanion” baseia-se na crescente necessidade de conscientização e responsabilidade sobre a economia doméstica/alimentar, sustentabilidade e a falta de habilidades culinárias por parte da maioria das pessoas. Com base no aumento dos preços dos alimentos e a preocupação crescente com o impacto ambiental do desperdício de alimentos, torna-se cada vez mais importante encontrar maneiras de maximizar o uso dos ingredientes disponíveis para preparar as refeições e minimizar o desperdício e os gastos. Além disso, como já mencionado, muitas pessoas têm dificuldade em encontrar receitas que possam ser feitas com ingredientes simples (ou baratos) que já possuem (ou não) em casa. 
Portanto, a plataforma tem o intuito de resolver esses problemas, fornecendo aos usuários soluções vantajosas e receitas personalizadas com base nos ingredientes que já possuem (ou que sejam acessíveis), além de dicas sobre como economizar dinheiro e reduzir o desperdício na cozinha. Também buscamos fomentar uma cultura de culinária sustentável e acessível, onde todos possam desfrutar de refeições saudáveis e saborosas sem comprometer o orçamento ou o meio ambiente.

## Público-alvo

Nosso público-alvo é amplo e diversificado, pois a necessidade de cozinhar de forma eficiente e econômica é universal. No entanto, identificamos alguns grupos específicos que podem se beneficiar particularmente da nossa plataforma. Para cada um desses grupos, apresentamos brevemente as razões pelas quais nossa plataforma pode ser especialmente útil para eles:

Estudantes: Muitos estudantes, principalmente universitários ou aqueles que já estão estagiando e não possuem muito tempo, ou "não param em casa", vivem com um orçamento “apertado” e podem não ter muita experiência em cozinhar. 

Profissionais: Não muito diferente dos estudantes, profissionais que trabalham em tempo integral podem ter pouca experiência e pouco tempo para planejar e preparar suas refeições. 

Famílias: As famílias, especialmente as grandes, podem achar difícil cozinhar refeições que agradem a todos sem gastar muito dinheiro ou desperdiçar ingredientes/comida. 

Pessoas que vivem sozinhas: Cozinhar para uma ou várias pessoas pode ser difícil, mas cozinhar para si mesmo pode ser ainda mais desafiador. 

Idosos: Pessoas idosas podem ter necessidades dietéticas específicas ou podem ter dificuldade em preparar refeições mais complexas. 

Pessoas com restrições dietéticas: Pessoas com alergias alimentares, intolerâncias ou que seguem dietas específicas (como veganismo, vegetarianismo, dieta sem glúten, entre outras) podem achar difícil encontrar receitas que atendam às suas necessidades. 

Aprendizes de culinária: Pessoas que estão aprendendo a cozinhar e querem experimentar novas receitas ou pessoas que querem elevar o nível e desafiar suas próprias habilidades culinárias podem usar nosso site para encontrar receitas adequadas ao seu nível de habilidade e aos ingredientes que têm disponíveis no momento.

---

# Concepção (Design Thinking)

## Processo de Design Thinking

**1. Matriz CSD (Certezas, Suposições, Dúvidas)**

![Matriz de Alinhamento](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/119761586/50f53889-6c11-4c6c-9f97-38ab5733bfc5)

**Certezas:**

1. O aplicativo será uma plataforma online que gera receitas com base nos ingredientes disponíveis para os usuários. 

2. O público-alvo inclui estudantes, profissionais, famílias, pessoas que vivem sozinhas, idosos, pessoas com restrições dietéticas e aprendizes de culinária.

3. As pessoas têm acesso limitado a ingredientes.

4. As pessoas querem receitas rápidas e simples. 

5. Muitas pessoas carecem de habilidades culinárias, resultando em gastos excessivos com serviços de entrega de alimentos.


**Suposições:**

1. Os usuários terão algum conhecimento básico de culinária.

2. Os usuários estarão dispostos a experimentar novas receitas.

3. As pessoas têm um orçamento específico para gastar com ingredientes. 

4. As pessoas têm uma quantidade específica de utensílios de cozinha em casa. 

5. As pessoas têm uma quantidade específica de tempo para cozinhar. 

**Dúvidas:**

1. Como os usuários vão interagir com o aplicativo?

2. Quais recursos adicionais os usuários gostariam de ver no aplicativo?

3. Eles não têm criatividade.

4. Eles não sabem cozinhar muito bem. 

**2. Mapa de Stakeholders**

![Stakeholders](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/119761586/99b2c94a-d483-450e-aa1c-966bdce72e8e)

**Usuários:**

1. Estudantes;

2. Profissionais;

3. Famílias; 

4. Pessoas que vivem sozinhas; 

5. Idosos;

6. Pessoas com restrições dietéticas; 

7. Aprendizes de culinária.

**Parceiros:**

1. Blogs de culinária e chefs online;

2. Empresas de alimentos e bebidas; 

3. Nutricionistas e dietistas; 

4. Organizações sem fins lucrativos focadas em sustentabilidade alimentar. 


**Desenvolvedores:**

- Thiago Branco de Oliveira
  
- Diogo Gouvêa Bastos Braga

- João Vitor Ferreira Jacinto

- Miguel Augusto de Paula

**3. Diagrama de Personas**

Já criamos algumas personas, incluindo Ana, Tony, Laura e Roberto. Cada persona tem um perfil detalhado que inclui idade, hobby, trabalho, personalidade, sonhos e objetivos com o aplicativo. (Detalhamento no próximo tópico)

**4. Mapa da Proposta de Valor**

![Proposta de Valor](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/119761586/2a5979f9-dbef-4204-aa71-c35706c65ddb)

- **Proposta de Valor:** 

Uma plataforma online que gera receitas personalizadas com base nos ingredientes disponíveis para os usuários, promovendo economia, redução de desperdício e uma alimentação mais saudável.


- **Benefícios para o Usuário:** 

Economia de dinheiro, redução do desperdício de alimentos, descoberta de novas receitas, melhoria das habilidades culinárias e qualidade de vida.

- **Valor para a Organização:** 

Os usuários fornecem feedback valioso que pode ser usado para melhorar o aplicativo. Eles também podem promover o aplicativo para outros, aumentando a base de usuários, entre outras coisas. 

**5. Mural de Possibilidades**

![image](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/119761586/895a989e-dc23-4ace-8eff-c1a3e1c428fb)

- **Possibilidade 1:** Integração com redes sociais para compartilhar receitas
- **Possibilidade 2:** Uma seção de comentários onde os usuários podem compartilhar suas experiências com as receitas
- **Possibilidade 3:** A capacidade de salvar receitas favoritas para acesso fácil no futuro

**6. Mapa de Priorização**

![Mapa de prioridade](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/119761586/f39941cc-dc6d-4c33-a04b-6c82243e188f)

**Alta Prioridade:**

- Desenvolvimento do gerador de receitas

- Funcionalidade de cadastro e login

- Visualização de receita em tela cheia

**Média Prioridade:**

- Funcionalidade de favoritar receitas

- Visualização de histórico de receitas

**Baixa Prioridade:**

- Lista de ingredientes recomendados para compra

- Integração com redes sociais

- Seção de comentários

---

# Especificações do Projeto

## Personas

Cada persona tem um perfil detalhado que inclui idade, hobby, trabalho, personalidade, sonhos e objetivos com o aplicativo. 

**1. Persona: Ana**

- Idade: 40 anos
- Hobby: Assistir filmes e séries
- Trabalho: Médica
- Personalidade: Focada e esforçada
- Sonhos: Ser uma médica de renome
- Objetivos com o aplicativo: Ana é uma médica ocupada que valoriza seu tempo. Ela está interessada em aprender a cozinhar refeições rápidas e saudáveis após um longo dia de trabalho. Ela também está procurando maneiras de economizar dinheiro ao maximizar o uso dos ingredientes que já tem em casa.

**2. Persona: Tony**

- Idade: 22 anos
- Hobby: Jogar videogames e ler
- Trabalho: Estudante universitário
- Personalidade: Curioso, determinado e prático
- Sonhos: Se formar e morar fora do Brasil
- Objetivos com o aplicativo: Tony é um estudante que busca cozinhar algo rápido e saboroso com os recursos acessíveis. Ele está interessado em aprender a cozinhar e encontrar receitas fáceis e rápidas que podem ser preparadas depois de chegar em casa da universidade.

**3. Persona: Laura**

- Idade: 34 anos
- Hobby: Esportes e fotografia
- Trabalho: Fotógrafa freelancer
- Personalidade: Criativa, aventureira e consciente sobre saúde
- Sonhos: Viajar pelo mundo e documentar suas experiências através da fotografia
- Objetivos com o aplicativo: Laura é uma fotógrafa freelancer que passa muito tempo viajando para diferentes locais para seu trabalho. Ela está procurando maneiras de preparar refeições saudáveis e simples em qualquer lugar que esteja. Ela também está interessada em experimentar receitas de diferentes culturas.

**4. Persona: Roberto**

- Idade: 70 anos
- Hobby: Pescar e jardinagem
- Trabalho: Aposentado
- Personalidade: Calmo, metódico e consciente sobre saúde
- Sonhos: Aprender novas habilidades culinárias e preparar refeições saudáveis para seus netos
- Objetivos com o aplicativo: Roberto é um idoso que gosta de cozinhar para sua família. Ele está procurando por receitas simples e nutritivas que sejam fáceis de preparar. Ele também está interessado em aprender sobre substituição de ingredientes para acomodar suas necessidades dietéticas específicas. Além disso, ele gostaria de planejar suas refeições semanais e criar uma lista de compras eficiente.

---

## Histórias de Usuários

Como um estudante universitário com orçamento limitado, eu gostaria de encontrar receitas rápidas e econômicas, para que eu possa preparar refeições saudáveis e saborosas sem gastar muito tempo ou dinheiro. 

Como um profissional ocupado, eu gostaria de acessar receitas que possam ser preparadas com antecedência, para que eu possa ter refeições prontas para consumir durante a semana de trabalho. 

Como pai/mãe de uma família grande, eu gostaria de encontrar receitas que sejam versáteis e agradam a todos, para que eu possa preparar uma única refeição que satisfaça as preferências de toda a família.

Como alguém que vive sozinho, eu gostaria de encontrar receitas que sejam adequadas para porções individuais, para evitar o desperdício e preparar a quantidade certa de comida para uma refeição.

Como um idoso, eu gostaria de encontrar receitas simples e nutritivas que são fáceis de preparar, para atender às minhas necessidades dietéticas específicas e evitar a preparação de refeições complexas.

Como uma pessoa com restrições dietéticas, eu gostaria de filtrar receitas por tipo de dieta (como vegana, sem glúten, etc.), para que eu possa encontrar receitas que atendam às minhas necessidades nutricionais específicas.

Como aprendiz de culinária, eu gostaria de usar o aplicativo para encontrar receitas adequadas ao meu nível de habilidade e aos ingredientes que tenho disponíveis no momento, para que eu possa experimentar novas receitas e desafiar minhas próprias habilidades culinárias.

---

## Requisitos

**Requisitos Funcionais:**

- O usuário deve ser capaz de acessar uma receita gerada pelo banco de dados.
 
- O sistema deve permitir que o usuário se cadastre e faça login. 

- O usuário deve ser capaz de visualizar a receita em tela cheia. 

- O sistema deve permitir que o usuário favorite as receitas. 

- O usuário deve ser capaz de visualizar seu histórico de receitas. 

- O usuário deve ser capaz de visualizar suas receitas favoritas. 


**Requisitos Não-Funcionais:**


- O sistema deve ser compatível com os navegadores Chrome e Mozilla. 

- O sistema deve ser desenvolvido usando HTML, CSS e JS. 

- O sistema utilizará um banco de dados JSON server para gerar uma receita.

- O design do sistema deve ser responsivo, adaptando-se a diferentes tamanhos de tela. 

- O sistema deve ser capaz de gerar receitas com base nos ingredientes disponíveis/selecionados pelo usuário.

---

# Projeto de Interface

## User/Screen Flow e Protótipo interativo

[User-Flow](https://www.figma.com/file/ZNHwYf0uQvqoMS3YTv3oi0/Kitchen-Companion?type=design&node-id=26%3A45&mode=design&t=rUFez5oaggbkA7Aw-1)

![image](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164224207/ba138624-f90c-4fbd-b757-7cf35426847b)

## Wireframes

[Wireframe](https://www.figma.com/file/ZNHwYf0uQvqoMS3YTv3oi0/Kitchen-Companion?type=design&node-id=0%3A1&mode=design&t=wkK34SY5DbemPRkl-1)

![image](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164224207/16668b51-e58a-4761-a1a3-54e1bf090296)

---

# Metodologia

## Ferramentas

- **Figma:** Utilizado para a criação do User Flow, Wireframe e Protótipo.
  
- **Github:** Empregado para o rastreamento da documentação e do progresso do projeto.
  
- **Visual Studio Code:** Utilizado para a criação dos códigos HTML, CSS, JS e estrutura JSON em LocalStorage/SessionStorage e Document Object Model (DOM).

- **Replit:** Utilizado para a criação do JSON Server e estrutura geral JSON.

## Gestão do Projeto

- **Microsoft To-Do:** Utilizado para o rastreamento e a divisão de tarefas/papéis. Para criar um fluxo de trabalho efetivo, foi necessário fazer o acompanhamento das tarefas com este aplicativo fácil de usar. Nele, foi possível atribuir tarefas aos membros do grupo e, quando cada um terminava seu afazer, marcava como concluído. Uma solução simples e efetiva.

![To-Do](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/119761586/0b035ce0-5421-48e2-910a-d961dc778969)

- **Discord:** Utilizado para reuniões semanais, correção dos códigos e implementações de algumas funcionalidades do site. Por meio de ligações, a plataforma permite a vizualização da tela de outros dispositivos em tempo real, facilitando a identificação e correção de problemas durante o desenvolvimentro dos códigos de cada parte das páginas do site, consequentemente auxiliando e sanando as dificuldades dos membros do time em relação a determinados assuntos durante o projeto.

- **WhatsApp:** Utilizado apenas para avisos e comunicados de caráter urgente e relevante para todos os membros do time. O aplicativo provou ser eficaz ao garantir que todos os membros se mantenham atualizados de forma rápida e eficiente.

## Controle de Versão

**Atribuição de Tarefas na Sprint 1:**

- **Thiago Branco de Oliveira:** Encarregado da criação do userflow, protótipo, wireframes, repositório e parte do design thinking.
- **Diogo Gouvêa Bastos Braga:** Responsável pela criação da apresentação em PowerPoint do grupo a respeito da introdução e apresentação do projeto.
- **João Vitor Ferreira Jacinto:** Encarregado da criação das histórias de usuário, aprimoramento da documentação e criação da lista de tarefas no Microsoft To-do.
- **Miguel Augusto de Paula:** Contribuiu com auxílio na documentação, na criação do mapa de stakeholders e parte do design thinking.

**Atribuição de Tarefas na Sprint 2:**

- **Thiago Branco de Oliveira:** Encarregado da criação das páginas de Cadastro e Login do site.
- **Diogo Gouvêa Bastos Braga:** Responsável pela criação de alguns elementos específicos da Página Principal do site.
- **João Vitor Ferreira Jacinto:** Encarregado da criação das páginas de Visualização de Receitas do site e primeira tentativa de implementação do Gerador de Receitas em uma página do site.
- **Miguel Augusto de Paula:** Contribuiu com a criação de alguns elementos específicos da Página Principal do site.

**Atribuição de Tarefas na Sprint 3:**

- **Thiago Branco de Oliveira:** Encarregado da criação da página de Perfil do Usuário e alguns elementos presentes na mesma Página de Perfil do Usuário.
- **Diogo Gouvêa Bastos Braga:** Responsável pela implementação da funcionalidade de Favoritar uma Receita e Visualização do Histórico de Receitas na Página de Perfil do Usuário.
- **João Vitor Ferreira Jacinto:** Encarregado da criação de uma nova página para uma nova versão da implementação do Gerador de Receitas do site e correção de alguns elemnentos da Página Principal do site.
- **Miguel Augusto de Paula:** Criação da página de Notícias e Anúncios do site.

**Atribuição de Tarefas na Sprint 4:**

- **Thiago Branco de Oliveira:** Encarregado pela integração das páginas por meio dos servidores JSON, e contribuiu com a revisão da documentação.
- **Diogo Gouvêa Bastos Braga:** Responsável pela atualização da documentação e criação da apresentação em PowerPoint do grupo a respeito da conclusão do projeto.
- **João Vitor Ferreira Jacinto:** Encarregado pela integração das páginas por meio dos códigos HTML, CSS e JS, e contribuiu com a revisão da documentação.
- **Miguel Augusto de Paula:** Contribuiu com auxílio na documentação e criação da apresentação em PowerPoint do grupo.

---

# Solução

## Video do Projeto

(vídeo de apresentação do problema que a equipe está tratando e a proposta de solução; colocar aqui depois)

## Funcionalidades

(funcionalidades que a aplicação fornece tanto para os usuários quanto aos administradores da solução; apaga essa linha depois)

- **Funcionalidade 1 -** Cadastro
- **Estrutura de Dados:** JSON - usuarios (exemplo)

"usuarios": [
    {
      "nome": "Simone Nogueira",
      "email": "Sincere@april.biz",
      "senha": "123654",
      "historico": [67, 89, 90],
      "favoritos": [89, 90],
      "id": 1
    }
}

- **Instruções de acesso e uso:** 

- Baixe a pasta do projeto, abra no Visual Studio Code e execute o comando "npm run start" no terminal para iniciar o JSON Server. Abra com o plugin Live Server para ter acesso ao site.
- Na tela de cadastro, você pode registrar um novo usuário para ter acesso às funcionalidades de perfil digitando seu nome, e-mail e senha. Com o cadastro bem-sucedido, você será redirecionado para a página principal.
- Se tentar se cadastrar sem preencher todos os campos, você receberá uma mensagem de erro indicando que deve preencher todos os campos.
- Se tentar se cadastrar com um e-mail já existente no banco de dados JSON, você também receberá uma mensagem de erro informando que o e-mail já foi cadastrado.

![telacadastro](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164263649/e2a6648b-91bd-43d5-8e08-d53e5aa39f51)

- **Funcionalidade 2 -** Login
- **Estrutura de Dados:** JSON - usuarios (exemplo)

"usuarios": [
    {
      "nome": "Sauron",
      "email": "mail.com",
      "senha": "123",
      "historico": [12],
      "favoritos": [],
      "id": 5
    }
}

- **Instruções de acesso e uso:** 

- Baixe a pasta do projeto, abra no Visual Studio Code e execute o comando "npm run start" no terminal para iniciar o JSON Server. Abra com o plugin Live Server para ter acesso ao site.
- Na tela de login o usuário pode digitar um email e senha previamente cadastrados na tela de cadastro para ter acesso às demais funcionalidades de perfil. Ao obter um login bem sucedido ele será direcionado para a main page.
- Se o login não for bem sucedido por motivos de senha ou email errados, o usuário recebe uma mensagem o avisando sobre o ocorrido.
- Se acontecer algum problema com acesso ao json server, o usuário também receberá uma mensagem de erro respectiva.
- O usuário também recebe mensagem de erro ao tentar logar deixando algum campo em branco no form de login.
- Aos professores: Também podem optar por usar um usuário pré-cadastrado para testes, como o mencionado acima (Login: Sauron, Senha:123) para realizar mais testes.

![telalogin](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164263649/63849534-76eb-4ae5-af37-4fbce0d30232)

- **Funcionalidade 3 -** Editar Perfil do Usuário
- **Estrutura de Dados:** JSON - usuarios (exemplo)

"usuarios": [
    {
      "nome": "Leon S. Kennedy",
      "email": "leon@mail",
      "senha": "1212",
      "historico": [2, 4, 6],
      "favoritos": [4, 6],
      "id": 4
    }
}

- **Instruções de acesso e uso:** 

- Baixe a pasta do projeto, abra no Visual Studio Code e execute o comando "npm run start" no terminal para iniciar o JSON Server. Abra com o plugin Live Server para ter acesso ao site.
- Aqui o usuário pode editar seu perfil, mundando seu nome, seu email ou sua senha, contanto que digite sua senha anterior. Caso tenha sucesso, suas informações serão modificadas com sucesso e atualizadas no banco de dados json.
- Caso o usuário digite sua senha anterior errada, ele terá sua requisição de mudança negada e receberá uma mensagem acusando senha errada e as informações permanecem inalteradas no json.
- Caso o usuário deixe de preencher algum campo do form, ele receberá um aviso para que preencha todos os campos.
- Caso alguma falha no acesso ao json aconteça, uma mensagem erro específica de erro ao carregar informações será exibida.
- Aos professores: Também podem optar por usar um usuário pré-cadastrado para testes, como o mencionado acima (Login: leon@mail, Senha:1212) para realizar mais testes. Caso algum erro inesperado aconteça, basta dar logoff e logar novamente.

![telaeditarperfil](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164263649/c80050ab-b1af-4202-98cd-c1a8fd15f2ea)

- **Funcionalidade 4 -** Vizualização do histórico da Receita
- **Estrutura de Dados:** JSON - receitas (exemplo)

"receitas": [
{
      "nome": "Carne bovina com feijão e cenoura",
      "proteina": "bovina",
      "carboidrato": "feijao",
      "vegetal": "cenoura",
      "modo-de-preparo": "Tempere a carne bovina com sal, pimenta, alho e um fio de azeite. Aqueça uma grelha ou frigideira em fogo alto e sele a carne dos dois lados. Reduza o fogo e cozinhe até o ponto desejado. Sirva com feijão e cenoura preparados da seguinte forma: Cozinhe o feijão em água com uma folha de louro até que esteja macio. Escorra e tempere com sal, alho refogado e azeite. Descasque e corte as cenouras em rodelas. Cozinhe em água com sal até que estejam macias. Tempere com azeite e ervas frescas.",
      "id": 17
    }
}

- **Instruções de acesso e uso:** 

- Baixe a pasta do projeto, abra no Visual Studio Code e execute o comando "npm run start" no terminal para iniciar o JSON Server. Abra com o plugin Live Server para ter acesso ao site.
- escrever aqui
- escrever aqui

![historico](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164263649/e14ea461-090f-4c8a-bcb9-82d5e199dfbd)

- **Funcionalidade 5 -** Vizualização de favoritos da Receita
- **Estrutura de Dados:** JSON - receitas (exemplo)

"receitas": [
{
      "nome": "Carne bovina com feijão e cenoura",
      "proteina": "bovina",
      "carboidrato": "feijao",
      "vegetal": "cenoura",
      "modo-de-preparo": "Tempere a carne bovina com sal, pimenta, alho e um fio de azeite. Aqueça uma grelha ou frigideira em fogo alto e sele a carne dos dois lados. Reduza o fogo e cozinhe até o ponto desejado. Sirva com feijão e cenoura preparados da seguinte forma: Cozinhe o feijão em água com uma folha de louro até que esteja macio. Escorra e tempere com sal, alho refogado e azeite. Descasque e corte as cenouras em rodelas. Cozinhe em água com sal até que estejam macias. Tempere com azeite e ervas frescas.",
      "id": 17
    }
}

- **Instruções de acesso e uso:** 

- Baixe a pasta do projeto, abra no Visual Studio Code e execute o comando "npm run start" no terminal para iniciar o JSON Server. Abra com o plugin Live Server para ter acesso ao site.
- escrever aqui
- escrever aqui

![favorito](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164263649/fa2ab15b-2767-4b2b-8de8-7ffcb9286a43)

- **Funcionalidade 6 -** Geração de Receita
- **Estrutura de Dados:** JSON - receitas (exemplo)

"receitas:" [
{
      "nome": "Carne bovina com arroz e cebola",
      "proteina": "bovina",
      "carboidrato": "arroz",
      "vegetal": "cebola",
      "modo-de-preparo": "Tempere a carne bovina com sal, pimenta, alho e um fio de azeite. Aqueça uma grelha ou frigideira em fogo alto e sele a carne dos dois lados. Reduza o fogo e cozinhe até o ponto desejado. Sirva com arroz e cebola preparados da seguinte forma: Lave o arroz e cozinhe em água com sal até que toda a água seja absorvida e o arroz esteja macio. Descasque e corte a cebola em rodelas. Refogue em uma frigideira com azeite até que estejam caramelizadas.",
      "id": 7
    }
}

- **Instruções de acesso e uso:** 

- Baixe a pasta do projeto, abra no Visual Studio Code e execute o comando "npm run start" no terminal para iniciar o JSON Server. Abra com o plugin Live Server para ter acesso ao site.
- escrever aqui
- escrever aqui

![gerar receita](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164263649/c2f0acec-513e-41b2-a7f1-f58eb730ea7a)

- **Funcionalidade 7 -** Vizualização da Receita
- **Estrutura de Dados:** JSON - receitas (exemplo)

"receitas": [
{
      "nome": "Carne bovina com feijão e cenoura",
      "proteina": "bovina",
      "carboidrato": "feijao",
      "vegetal": "cenoura",
      "modo-de-preparo": "Tempere a carne bovina com sal, pimenta, alho e um fio de azeite. Aqueça uma grelha ou frigideira em fogo alto e sele a carne dos dois lados. Reduza o fogo e cozinhe até o ponto desejado. Sirva com feijão e cenoura preparados da seguinte forma: Cozinhe o feijão em água com uma folha de louro até que esteja macio. Escorra e tempere com sal, alho refogado e azeite. Descasque e corte as cenouras em rodelas. Cozinhe em água com sal até que estejam macias. Tempere com azeite e ervas frescas.",
      "id": 17
    }
}

- **Instruções de acesso e uso:** 

- Baixe a pasta do projeto, abra no Visual Studio Code e execute o comando "npm run start" no terminal para iniciar o JSON Server. Abra com o plugin Live Server para ter acesso ao site.
- escrever aqui
- escrever aqui
  
![visualizar receita](https://github.com/ICEI-PUC-Minas-PPLES-TI/plf-es-2024-1-ti1-0385200-gerador-de-receitas/assets/164263649/74a998e1-8ce9-4d65-943c-b4cdc0c657fe)

## Estruturas de Dados

**Estrutura de Dados - usuarios** 
- Usado para Cadastro, Login e Editar Perfil do Usuário

- "usuarios": [
    {
      "nome": "Sauron",
      "email": "mail.com",
      "senha": "123",
      "historico": [12],
      "favoritos": [],
      "id": 5
    }
}

**Estrutura de Dados - receitas** 
- Usado para Visualização de Receitas e Geração de Receitas

- "receitas:" [
{
      "nome": "Carne bovina com arroz e cebola",
      "proteina": "bovina",
      "carboidrato": "arroz",
      "vegetal": "cebola",
      "modo-de-preparo": "Tempere a carne bovina com sal, pimenta, alho e um fio de azeite. Aqueça uma grelha ou frigideira em fogo alto e sele a carne dos dois lados. Reduza o fogo e cozinhe até o ponto desejado. Sirva com arroz e cebola preparados da seguinte forma: Lave o arroz e cozinhe em água com sal até que toda a água seja absorvida e o arroz esteja macio. Descasque e corte a cebola em rodelas. Refogue em uma frigideira com azeite até que estejam caramelizadas.",
      "id": 7
    }
}

# Módulos e APIs
1-Funções do Arquivo app.js

    Função displayMessage
    Função emailJaCadastrado
    Função createUser
    Função cadastrarUsuario
    Função atualizarInterfaceUsuario
    Função logoffUsuario
    Eventos de Interface

Função displayMessage

Descrição: Exibe uma mensagem na tela dentro de um elemento HTML com o ID msg.

Parâmetros:

    mensagem (string): A mensagem a ser exibida.
    isError (boolean, opcional): Define se a mensagem é de erro (true) ou sucesso (false). O padrão é true.

Exemplo de Uso:

displayMessage("Usuário cadastrado com sucesso!", false);

Código:

function displayMessage(mensagem, isError = true) {
  const msg = document.getElementById("msg");
  msg.innerHTML =
    '<div class="' +
    (isError ? "alert-error" : "alert-success") +
    '">' +
    mensagem +
    "</div>";
}

Função emailJaCadastrado

Descrição: Verifica se um e-mail já está cadastrado no servidor.

Parâmetros:

    email (string): O e-mail a ser verificado.
    callback (function): Função de retorno que recebe um booleano indicando se o e-mail já está cadastrado.

Exemplo de Uso:


emailJaCadastrado("teste@exemplo.com", function(jaCadastrado) {
  if (jaCadastrado) {
    // Lógica para e-mail já cadastrado
  }
});

Código:

function emailJaCadastrado(email, callback) {
  fetch("http://localhost:3000/usuarios?email=" + encodeURIComponent(email))
    .then((response) => response.json())
    .then((data) => {
      callback(data.length > 0);
    })
    .catch((error) => {
      console.error("Erro ao verificar e-mail:", error);
      callback(false);
    });
}

Função createUser

Descrição: Cadastra um novo usuário no servidor.

Parâmetros:

    usuario (object): Objeto contendo os dados do usuário a ser cadastrado.
    callback (function): Função de retorno que recebe um objeto com a resposta da operação de cadastro.

Exemplo de Uso:


createUser({ nome: "João", email: "joao@exemplo.com", senha: "123456" }, function(response) {
  if (response.success) {
    // Lógica para cadastro bem-sucedido
  }
});

Código:

function createUser(usuario, callback) {
  fetch("http://localhost:3000/usuarios", {
    method: "POST",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(usuario),
  })
    .then((response) => response.json())
    .then((data) => {
      callback({ success: true, data: data });
    })
    .catch((error) => {
      console.error("Erro ao cadastrar usuário:", error);
      callback({ success: false, message: error.message });
    });
}

Função cadastrarUsuario

Descrição: Função principal para realizar o cadastro de um usuário.

Código:

function cadastrarUsuario() {
  // Obtem os valores dos campos do formulário
  let nome = document.getElementById("inputNome").value.trim();
  let email = document.getElementById("inputEmail").value.trim();
  let senha = document.getElementById("inputSenha").value.trim();

  // Verifica se todos os campos estão preenchidos
  if (!nome || !email || !senha) {
    displayMessage("Por favor, preencha todos os campos.", true);
    return;
  }

  // Verifica se o e-mail já está cadastrado
  emailJaCadastrado(email, (jaCadastrado) => {
    if (jaCadastrado) {
      displayMessage(
        "E-mail já cadastrado. Por favor, use outro e-mail.",
        true
      );
    } else {
      // Cria um objeto com os dados do usuário
      let usuario = {
        nome: nome,
        email: email,
        senha: senha,
        historico: [],
        favoritos: [],
      };

      // Envia os dados para o servidor
      createUser(usuario, function (response) {
        if (response.success) {
          // Salva o estado de logado no localStorage
          localStorage.setItem(
            "usuarioLogado",
            JSON.stringify({ nome: usuario.nome, email: usuario.email })
          );
          displayMessage("Usuário cadastrado com sucesso!", false);
          document.getElementById("form-cadastro").reset();
          atualizarInterfaceUsuario();
          // Redireciona para a página de perfil
          window.location.href = "../main/index.html";
        } else {
          displayMessage(
            "Erro ao cadastrar usuário: " + response.message,
            true
          );
        }
      });
    }
  });
}

Função atualizarInterfaceUsuario

Descrição: Atualiza a interface do usuário logado.

Código:

function atualizarInterfaceUsuario() {
  const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"));
  const usuarioNome = document.getElementById("usuarioNome");
  const logoff = document.getElementById("logoff");

  if (usuarioLogado) {
    usuarioNome.innerText = usuarioLogado.nome;
    usuarioNome.href = "javascript:void(0);";
    logoff.style.display = "block";
  } else {
    usuarioNome.innerText = "Login";
    usuarioNome.href = "../login/login.html";
    logoff.style.display = "none";
  }
}

Função logoffUsuario

Descrição: Desloga o usuário, removendo seus dados do localStorage.

Código:

function logoffUsuario() {
  localStorage.removeItem("usuarioLogado");
  atualizarInterfaceUsuario();
}

Eventos de Interface

Descrição: Eventos relacionados à interface do usuário.

Código:

// Adiciona o evento de clique ao botão de cadastro
document
  .getElementById("btnCadastrar")
  .addEventListener("click", function (event) {
    event.preventDefault();
    cadastrarUsuario();
  });

// Atualiza a interface do usuário ao carregar a página
document.addEventListener("DOMContentLoaded", function () {
  atualizarInterfaceUsuario();
});



2-Funções do Arquivo api.js

    Função fetchReceitas
    Função saveHistorico

Função fetchReceitas

Descrição: Busca as receitas do servidor.

Retorno: Retorna uma promessa que resolve para os dados das receitas em formato JSON.

Exemplo de Uso:

fetchReceitas()
  .then(receitas => {
    console.log(receitas);
  })
  .catch(error => {
    console.error("Erro:", error);
  });

Código:

async function fetchReceitas() {
  const response = await fetch("http://localhost:3000/receitas");
  if (!response.ok) {
    throw new Error("Erro ao buscar receitas");
  }
  return response.json();
}

Função saveHistorico

Descrição: Salva o histórico de receitas visualizadas de um usuário no servidor.

Parâmetros:

    usuarioId (string): O ID do usuário.
    receitaId (string): O ID da receita a ser adicionada ao histórico do usuário.

Exemplo de Uso:

saveHistorico("usuario123", "receita456")
  .then(() => {
    console.log("Histórico salvo com sucesso");
  })
  .catch(error => {
    console.error("Erro:", error);
  });

Código:

async function saveHistorico(usuarioId, receitaId) {
  const response = await fetch(`http://localhost:3000/usuarios/${usuarioId}`);
  if (!response.ok) {
    throw new Error("Erro ao buscar usuário");
  }
  const usuario = await response.json();
  const historicoAtualizado = [...usuario.historico, receitaId];

  const updateResponse = await fetch(
    `http://localhost:3000/usuarios/${usuarioId}`,
    {
      method: "PATCH",
      headers: {
        "Content-Type": "application/json",
      },
      body: JSON.stringify({ historico: historicoAtualizado }),
    }
  );
  if (!updateResponse.ok) {
    throw new Error("Erro ao salvar histórico");
  }
}



3-Funções do Arquivo login.js

    Constante apiUrl
    Função toggleMenu
    Função displayMessage
    Função loginUsuario
    Função handleLogin
    Função handleLogoff
    Função verificarEstadoLogin
    Eventos de Interface

Constante apiUrl

Descrição: URL da API JSONServer. Substitua pela URL correta da sua API com /usuarios no final.

Código:

const apiUrl = "http://localhost:3000/usuarios";

Função toggleMenu

Descrição: Alterna a visibilidade do menu de navegação.

Parâmetros: Nenhum.

Exemplo de Uso:

toggleMenu();

Código:

function toggleMenu() {
  const menu = document.getElementById("nav");
  if (menu) {
    menu.classList.toggle("active");
  }
}

Função displayMessage

Descrição: Exibe uma mensagem na tela dentro de um elemento HTML com o ID msg.

Parâmetros:

    mensagem (string): A mensagem a ser exibida.
    isError (boolean, opcional): Define se a mensagem é de erro (true) ou sucesso (false). O padrão é true.

Exemplo de Uso:

displayMessage("Login bem-sucedido!", false);

Código:

function displayMessage(mensagem, isError = true) {
  const msg = document.getElementById("msg");
  if (msg) {
    msg.innerHTML =
      '<div class="' +
      (isError ? "alert-error" : "alert-success") +
      '">' +
      mensagem +
      "</div>";
  }
}

Função loginUsuario

Descrição: Verifica as credenciais de login do usuário na API JSONServer.

Parâmetros:

    email (string): O e-mail do usuário.
    senha (string): A senha do usuário.
    callback (function): Função de retorno que recebe dois parâmetros:
        sucesso (boolean): Indica se o login foi bem-sucedido.
        usuario (object): Objeto contendo os dados do usuário (se o login for bem-sucedido).

Exemplo de Uso:

loginUsuario("teste@exemplo.com", "senha123", (sucesso, usuario) => {
  if (sucesso) {
    console.log("Login bem-sucedido", usuario);
  } else {
    console.log("Login falhou");
  }
});

Código:

function loginUsuario(email, senha, callback) {
  fetch(apiUrl)
    .then((response) => response.json())
    .then((usuarios) => {
      const usuario = usuarios.find(
        (user) => user.email === email && user.senha === senha
      );
      callback(usuario !== undefined, usuario);
    })
    .catch((error) => {
      console.error("Erro ao verificar login via API JSONServer:", error);
      callback(false);
    });
}

Função handleLogin

Descrição: Lida com o processo de login do usuário, verificando os campos de entrada, chamando a função de login e exibindo mensagens de acordo com o resultado.

Parâmetros: Nenhum.

Código:

function handleLogin() {
  const emailInput = document.getElementById("loginEmail");
  const senhaInput = document.getElementById("loginSenha");

  if (!emailInput || !senhaInput) {
    displayMessage("Erro ao obter os elementos de entrada.", true);
    return;
  }

  let email = emailInput.value.trim();
  let senha = senhaInput.value.trim();

  if (!email || !senha) {
    displayMessage("Por favor, preencha todos os campos.", true);
    return;
  }

  loginUsuario(email, senha, (sucesso, usuario) => {
    if (sucesso) {
      displayMessage("Login bem-sucedido!", false);
      // Armazenar estado de login no localStorage
      localStorage.setItem("usuarioLogado", JSON.stringify(usuario));
      verificarEstadoLogin();
      // Limpar os campos de email e senha
      emailInput.value = "";
      senhaInput.value = "";
      window.location.href = "../main/index.html";
    } else {
      displayMessage("E-mail ou senha incorretos. Tente novamente.", true);
      // Limpar os campos de email e senha
      emailInput.value = "";
      senhaInput.value = "";
    }
  });
}

Função handleLogoff

Descrição: Lida com o processo de logoff do usuário, removendo o estado de login do localStorage e atualizando a interface.

Parâmetros: Nenhum.

Código:

function handleLogoff() {
  // Remover estado de login do localStorage
  localStorage.removeItem("usuarioLogado");
  verificarEstadoLogin();
  displayMessage("Você saiu da sua conta.", false);
}

Função verificarEstadoLogin

Descrição: Verifica o estado de login do usuário e atualiza a interface de acordo.

Parâmetros: Nenhum.

Código:

function verificarEstadoLogin() {
  const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"));
  const btnLoginHeader = document.getElementById("btnLoginHeader");
  const userHeader = document.getElementById("userHeader");

  if (!btnLoginHeader || !userHeader) {
    console.error("Elementos do cabeçalho não encontrados.");
    return;
  }

  if (usuarioLogado) {
    btnLoginHeader.textContent = "Logoff";
    btnLoginHeader.addEventListener("click", handleLogoff);
    userHeader.textContent =
      usuarioLogado.nome.length > 15
        ? usuarioLogado.nome.substring(0, 15) + "..."
        : usuarioLogado.nome;
    userHeader.href = "#";
    userHeader.addEventListener("click", () => {
      window.location.href = "../perfil/perfil.html"; // Atualize para o caminho correto do perfil
    });
  } else {
    btnLoginHeader.textContent = "Login";
    btnLoginHeader.removeEventListener("click", handleLogoff);
    userHeader.textContent = "Cadastre-se";
    userHeader.href = "../cadastro/cadastro.html";
  }
}

Eventos de Interface

Descrição: Eventos relacionados à interface do usuário.

Código:

document
  .getElementById("btnLogin")
  ?.addEventListener("click", function (event) {
    event.preventDefault();
    handleLogin();
  });
  
document.addEventListener("DOMContentLoaded", verificarEstadoLogin);

const btnMobile = document.getElementById("btn-mobile");
btnMobile?.addEventListener("click", toggleMenu);

4-Funções do Arquivo geradorderceitas.js

    Função buscarReceita
    Função irParaReceita

Função buscarReceita

Descrição: Busca uma receita com base nos ingredientes fornecidos pelo usuário.

Parâmetros: Nenhum.

Funcionamento:

    Obtém os valores dos ingredientes (carboidrato, proteína, vegetal) dos campos de entrada HTML.
    Faz uma requisição ao arquivo JSON localizado em http://localhost:3000/receitas.
    Verifica se a chave receitas existe no objeto retornado e se é um array.
    Encontra a receita que corresponde aos ingredientes fornecidos.
    Exibe a receita encontrada na interface do usuário ou uma mensagem de erro se nenhuma receita for encontrada.
    Armazena a receita encontrada no localStorage para uso posterior.

Exemplo de Uso:

buscarReceita();

Código:

async function buscarReceita() {
  const carboidrato = document.getElementById('carboidrato').value.toLowerCase();
  const proteina = document.getElementById('proteina').value.toLowerCase();
  const vegetal = document.getElementById('vegetal').value.toLowerCase();

  const url = 'http://localhost:3000/usuarios;

  try {
    const response = await fetch(url);
    const data = await response.json();

    // Verificar o tipo de dado retornado
    console.log('Tipo de dado retornado:', typeof data);

    // Verificar se a chave "receitas" existe no objeto retornado
    if (!data.receitas || !Array.isArray(data.receitas)) {
      throw new Error('O JSON retornado não contém a chave "receitas" ou "receitas" não é um array.');
    }

    // Acessar o array de receitas
    const receitas = data.receitas;

    console.log('Receitas:', receitas);

    // Encontrar a receita que corresponde aos ingredientes selecionados
    const receitaEncontrada = receitas.find(receita => {
      return receita.carboidrato.toLowerCase() === carboidrato &&
             receita.proteina.toLowerCase() === proteina &&
             receita.vegetal.toLowerCase() === vegetal;
    });

    console.log('Receita encontrada:', receitaEncontrada);

    const resultadoDiv = document.getElementById('resultado');
    if (receitaEncontrada) {
      localStorage.setItem('receita', JSON.stringify(receitaEncontrada));

      resultadoDiv.innerHTML = `
        <h3>${receitaEncontrada.nome}</h3>
        <div>
          <button onclick="irParaReceita()" class="btn-ver-receita">Ver Receita</button>
        </div>
      `;
    } else {
      resultadoDiv.innerHTML = `<p>Nenhuma receita encontrada com os ingredientes selecionados.</p>`;
    }
  } catch (error) {
    console.error('Erro ao buscar receita:', error);
  }
}

Função irParaReceita

Descrição: Redireciona o usuário para a página de visualização da receita.

Parâmetros: Nenhum.

Exemplo de Uso:

irParaReceita();

Código:

function irParaReceita() {
  window.location.href = '../perfil/receita-view.html';
}

5-Funções do Arquivo perfil.js

    Função Anônima para DOMContentLoaded
    Função verificarSenhaAtualEAtualizar
    Função displayMessage

Função Anônima para DOMContentLoaded

Descrição: Esta função é executada quando o evento DOMContentLoaded é disparado. Verifica se o usuário está logado e atualiza a interface de acordo.

Parâmetros: Nenhum.

Funcionamento:

    Obtém os dados do usuário logado do localStorage.
    Atualiza a interface para exibir uma saudação personalizada se o usuário estiver logado.
    Exibe opções de login e cadastro se o usuário não estiver logado.
    Adiciona listeners para botões de logout, atualização de perfil e redirecionamento.

Código:

document.addEventListener("DOMContentLoaded", () => {
  const user = JSON.parse(localStorage.getItem("usuarioLogado"));

  const userGreeting = document.getElementById("userGreeting");
  const logoutButton = document.getElementById("logoutButton");

  if (!user) {
    // Exibe uma mensagem de erro se o usuário não estiver logado
    displayMessage("Você precisa estar logado para editar seu perfil.", true);
    // Exibe os botões de login e cadastro
    if (userGreeting) {
      userGreeting.innerHTML = `
          <div class="retangulo-cadastro">
            <a href="../login/login.html">Login</a>
          </div>
          <div class="retangulo-cadastro">
            <a href="../cadastro/cadastro.html">Cadastre-se</a>
          </div>
        `;
    }
  } else {
    // Exibe a saudação personalizada
    if (userGreeting) {
      userGreeting.innerHTML = `
          <div class="retangulo-cadastro retangulo-cadastro-off">
            <span style="color: var(--gelo); cursor: pointer;" id="nomeUsuario">Olá, ${user.nome}</span>
          </div>
        `;
    }

    // Listener para o botão de logout
    if (logoutButton) {
      logoutButton.addEventListener("click", () => {
        localStorage.removeItem("usuarioLogado");
        location.href = "../main/index.html";
      });
    }

    document.getElementById("btnUpdate")?.addEventListener("click", (event) => {
      event.preventDefault();
      verificarSenhaAtualEAtualizar(user);
    });

    document.getElementById("nomeUsuario")?.addEventListener("click", () => {
      window.location.href = "../main/index.html";
    });
  }
});

Função verificarSenhaAtualEAtualizar

Descrição: Verifica a senha atual do usuário e atualiza os dados do perfil no servidor.

Parâmetros:

    user (object): Objeto contendo os dados do usuário logado.

Funcionamento:

    Obtém os valores dos campos de entrada para nome, e-mail, nova senha e senha atual.
    Verifica se todos os campos estão preenchidos.
    Faz uma requisição ao servidor para obter os dados do usuário.
    Verifica se a senha atual está correta.
    Atualiza os dados do usuário no servidor.
    Exibe uma mensagem de sucesso ou erro conforme o resultado.

Código:

function verificarSenhaAtualEAtualizar(user) {
  const nome = document.getElementById("inputNome").value.trim();
  const email = document.getElementById("loginEmail").value.trim();
  const novaSenha = document.getElementById("loginSenha").value.trim();
  const senhaAtual = document.getElementById("currentSenha").value.trim();

  if (!nome || !email || !novaSenha || !senhaAtual) {
    displayMessage("Por favor, preencha todos os campos.", true);
    return;
  }

  // Verifica a senha atual do usuário no servidor
  fetch(`${apiUrl}?id=${user.id}`)
    .then((response) => {
      if (!response.ok) {
        throw new Error("Erro ao obter dados do usuário.");
      }
      return response.json();
    })
    .then((users) => {
      if (users.length === 0) {
        throw new Error("Usuário não encontrado.");
      }

      const data = users[0];
      console.log("Dados do usuário obtidos:", data);

      if (senhaAtual !== data.senha) {
        throw new Error("Senha atual incorreta. Tente novamente.");
      }

      const usuarioAtualizado = {
        nome: nome,
        email: email,
        senha: novaSenha,
        historico: data.historico,
        favoritos: data.favoritos,
        id: user.id,
      };

      return fetch(`${apiUrl}/${user.id}`, {
        method: "PUT",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify(usuarioAtualizado),
      });
    })
    .then((response) => {
      if (!response.ok) {
        throw new Error("Erro ao atualizar usuário no servidor.");
      }
      return response.json();
    })
    .then((data) => {
      console.log("Usuário atualizado com sucesso:", data);
      displayMessage("Dados atualizados com sucesso!", false);
      localStorage.setItem("usuarioLogado", JSON.stringify(data));
      // Recarregar a página após um pequeno atraso para exibir a mensagem de sucesso
      setTimeout(() => {
        location.reload();
      }, 7000); // 7 segundos
    })
    .catch((error) => {
      console.error("Erro ao atualizar usuário:", error);
      displayMessage(error.message, true);
    });
}

Função displayMessage

Descrição: Exibe uma mensagem na tela dentro de um elemento HTML com o ID msg.

Parâmetros:

    mensagem (string): A mensagem a ser exibida.
    isError (boolean, opcional): Define se a mensagem é de erro (true) ou sucesso (false). O padrão é true.

Funcionamento:

    Define o conteúdo do elemento msg com a mensagem fornecida.
    Adiciona a classe show para exibir a mensagem.
    Remove a classe show após 7 segundos para ocultar a mensagem.

Exemplo de Uso:

displayMessage("Dados atualizados com sucesso!", false);

Código:

function displayMessage(mensagem, isError = true) {
  const msg = document.getElementById("msg");
  if (msg) {
    msg.innerHTML =
      '<div class="' +
      (isError ? "alert-error" : "alert-success") +
      '">' +
      mensagem +
      "</div>";
    // Adiciona uma classe para exibir a mensagem
    msg.classList.add("show");
    // Remove a classe após 7 segundos para ocultar a mensagem
    setTimeout(() => {
      msg.classList.remove("show");
    }, 7000); // 7 segundos
  }
}

6-Funções do Arquivo coracao.js

    Variável isLiked
    Função toggleHeart

Variável isLiked

Descrição: Variável booleana que indica se o item foi curtido (liked) ou não. Inicialmente definida como false.

Código:

let isLiked = false;

Função toggleHeart

Descrição: Alterna o estado de curtido (liked) de um item ao clicar no botão de coração, mudando a aparência do ícone.

Parâmetros:

    button (HTMLElement): O botão de coração que foi clicado.

Funcionamento:

    Alterna o valor da variável isLiked.
    Seleciona o ícone de coração dentro do botão.
    Alterna a classe fas do ícone de coração para indicar se está curtido ou não.
    Muda a cor do ícone de coração.

Exemplo de Uso:

const heartButton = document.getElementById('heartButton');
heartButton.addEventListener('click', () => {
  toggleHeart(heartButton);
});

Código:


function toggleHeart(button) {
  isLiked = !isLiked;
  const heartIcon = button.querySelector('i');
  heartIcon.classList.toggle('fas');
  heartIcon.style.color = isLiked ? 'var(--vermelho)' : 'var(--vermelho)';
}

7-Funções do Arquivo historico.js

    Função Anônima para DOMContentLoaded
    Função displayMessage
    Função carregarHistorico
    Função toggleHeart

Função Anônima para DOMContentLoaded

Descrição: Esta função é executada quando o evento DOMContentLoaded é disparado. Verifica se o usuário está logado e atualiza a interface de acordo.

Parâmetros: Nenhum.

Funcionamento:

    Obtém os dados do usuário logado do localStorage.
    Atualiza a interface para exibir uma saudação personalizada se o usuário estiver logado.
    Exibe opções de login e cadastro se o usuário não estiver logado.
    Adiciona listeners para botões de logout e redirecionamento.
    Chama a função carregarHistorico para carregar o histórico de receitas do usuário.

Código:

document.addEventListener("DOMContentLoaded", () => {
  const user = JSON.parse(localStorage.getItem("usuarioLogado"));

  const userGreeting = document.getElementById("userGreeting");
  const logoutButton = document.getElementById("logoutButton");

  if (!user) {
    displayMessage("Você precisa estar logado para ver seu histórico.", true);
    userGreeting.innerHTML = `
        <div class="retangulo-cadastro">
          <a href="../login/login.html">Login</a>
        </div>
        <div class="retangulo-cadastro">
          <a href="../cadastro/cadastro.html">Cadastre-se</a>
        </div>
      `;
    return;
  } else {
    userGreeting.innerHTML = `
        <div class="retangulo-cadastro retangulo-cadastro-off">
          <span style="color: var(--gelo); cursor: pointer;" id="nomeUsuario">Olá, ${user.nome}</span>
        </div>
      `;

    logoutButton.addEventListener("click", () => {
      localStorage.removeItem("usuarioLogado");
      location.href = "../login/login.html";
    });

    document.getElementById("nomeUsuario").addEventListener("click", () => {
      window.location.href = "perfil.html";
    });

    carregarHistorico(user.id);
  }
});

Função displayMessage

Descrição: Exibe uma mensagem na tela dentro de um elemento HTML com o ID msg.

Parâmetros:

    mensagem (string): A mensagem a ser exibida.
    isError (boolean, opcional): Define se a mensagem é de erro (true) ou sucesso (false). O padrão é true.

Exemplo de Uso:

displayMessage("Erro ao carregar histórico de receitas.", true);

Código:

function displayMessage(mensagem, isError = true) {
  const msg = document.getElementById("msg");
  msg.innerHTML =
    '<div class="' +
    (isError ? "alert-error" : "alert-success") +
    '">' +
    mensagem +
    "</div>";
}

Função carregarHistorico

Descrição: Carrega o histórico de receitas do usuário a partir do servidor e exibe na interface.

Parâmetros:

    userId (string): O ID do usuário.

Funcionamento:

    Faz uma requisição ao servidor para obter os dados do usuário.
    Verifica se o usuário tem um histórico de receitas.
    Para cada receita no histórico, faz uma requisição ao servidor para obter os dados da receita.
    Cria e exibe um card para cada receita na interface.
    Exibe uma mensagem se o usuário não tiver nenhum histórico de receitas.

Código:

function carregarHistorico(userId) {
  fetch(`${apiUrl}/${userId}`)
    .then((response) => response.json())
    .then((user) => {
      const historico = user.historico || [];
      const favoritos = user.favoritos || [];
      const container = document.getElementById("cardsContainer");

      if (historico.length === 0) {
        displayMessage("Você ainda não gerou nenhuma receita.", false);
        return;
      }

      historico.forEach((receitaId) => {
        fetch(`http://localhost:3000/receitas/${receitaId}`)
          .then((response) => response.json())
          .then((receita) => {
            const card = document.createElement("div");
            card.classList.add("card-perfil");

            const link = document.createElement("a");
            link.href = `receita-view.html?id=${receita.id}`;
            link.style.textDecoration = "none";
            link.style.color = "inherit";

            const contextoLike = document.createElement("div");
            contextoLike.classList.add("contexto-like");

            const titulo = document.createElement("h3");
            titulo.textContent = receita.nome;

            const botaoCoracao = document.createElement("button");
            botaoCoracao.classList.add("botao-coracao");
            botaoCoracao.innerHTML = `<i class="far fa-heart"></i>`;
            if (favoritos.includes(receita.id)) {
              botaoCoracao.querySelector("i").classList.add("fas");
            }
            botaoCoracao.addEventListener("click", (event) => {
              event.stopPropagation();
              event.preventDefault();
              toggleHeart(botaoCoracao, receita.id);
            });

            contextoLike.appendChild(titulo);
            contextoLike.appendChild(botaoCoracao);

            const descricao = document.createElement("p");
            descricao.textContent =
              receita["modo-de-preparo"].split(" ").slice(0, 20).join(" ") +
              "...";

            link.appendChild(contextoLike);
            link.appendChild(descricao);
            card.appendChild(link);
            container.appendChild(card);
          })
          .catch((error) => {
            console.error("Erro ao carregar receita:", error);
            displayMessage("Erro ao carregar receita.", true);
          });
      });
    })
    .catch((error) => {
      console.error("Erro ao carregar histórico de receitas:", error);
      displayMessage("Erro ao carregar histórico de receitas.", true);
    });
}

Função toggleHeart

Descrição: Alterna o estado de favorito de uma receita para o usuário logado.

Parâmetros:

    button (HTMLElement): O botão de coração que foi clicado.
    receitaId (string): O ID da receita.

Funcionamento:

    Verifica se o usuário está logado.
    Alterna o estado do ícone de coração (favorito/não favorito).
    Atualiza a lista de favoritos do usuário.
    Envia a atualização para o servidor.
    Atualiza os dados do usuário no localStorage.

Código:

function toggleHeart(button, receitaId) {
  const user = JSON.parse(localStorage.getItem("usuarioLogado"));

  if (!user) {
    displayMessage("Você precisa estar logado para curtir receitas.", true);
    return;
  }

  const heartIcon = button.querySelector("i");
  const isLiked = heartIcon.classList.toggle("fas");

  heartIcon.style.color = isLiked ? "var(--vermelho)" : "var(--vermelho)";

  if (isLiked) {
    user.favoritos.push(receitaId);
  } else {
    user.favoritos = user.favoritos.filter((id) => id !== receitaId);
  }

  const userDataToUpdate = {
    favoritos: user.favoritos,
  };

  fetch(`${apiUrl}/${user.id}`, {
    method: "PATCH",
    headers: {
      "Content-Type": "application/json",
    },
    body: JSON.stringify(userDataToUpdate),
  })
    .then((response) => response.json())
    .then((data) => {
      localStorage.setItem(
        "usuarioLogado",
        JSON.stringify({ ...user, ...userDataToUpdate })
      );
    })
    .catch((error) => {
      console.error("Erro ao atualizar favoritos:", error);
      displayMessage("Erro ao atualizar favoritos.", true);
    });
}

8-Funções do Arquivo favoritos.js

    Função carregarFavoritos


Função carregarFavoritos

Descrição: Carrega as receitas favoritas do usuário a partir do servidor e exibe na interface.

Parâmetros:

    userId (string): O ID do usuário.

Funcionamento:

    Faz uma requisição ao servidor para obter os dados do usuário.
    Verifica se o usuário tem receitas favoritas.
    Para cada receita favorita, faz uma requisição ao servidor para obter os dados da receita.
    Cria e exibe um card para cada receita na interface.
    Exibe uma mensagem se o usuário não tiver nenhuma receita favorita.

Código:

function carregarFavoritos(userId) {
  fetch(`${apiUrl}/${userId}`)
    .then((response) => response.json())
    .then((user) => {
      const favoritos = user.favoritos || [];
      const container = document.getElementById("cardsContainer");

      if (favoritos.length === 0) {
        displayMessage("Você ainda não tem nenhuma receita favorita.", false);
        return;
      }

      favoritos.forEach((receitaId) => {
        fetch(`http://localhost:3000/receitas/${receitaId}`)
          .then((response) => response.json())
          .then((receita) => {
            const card = document.createElement("div");
            card.classList.add("card-perfil");

            const link = document.createElement("a");
            link.href = `receita-view.html?id=${receita.id}`;
            link.style.textDecoration = "none";
            link.style.color = "inherit";

            const contextoLike = document.createElement("div");
            contextoLike.classList.add("contexto-like");

            const titulo = document.createElement("h3");
            titulo.textContent = receita.nome;

            const botaoCoracao = document.createElement("button");
            botaoCoracao.classList.add("botao-coracao");
            botaoCoracao.innerHTML = `<i class="fas fa-heart"></i>`;
            botaoCoracao.addEventListener("click", (event) => {
              event.stopPropagation();
              event.preventDefault();
              toggleHeart(botaoCoracao, receita.id);
            });

            contextoLike.appendChild(titulo);
            contextoLike.appendChild(botaoCoracao);

            const descricao = document.createElement("p");
            descricao.textContent =
              receita["modo-de-preparo"].split(" ").slice(0, 20).join(" ") +
              "...";

            link.appendChild(contextoLike);
            link.appendChild(descricao);
            card.appendChild(link);
            container.appendChild(card);
          })
          .catch((error) => {
            console.error("Erro ao carregar receita:", error);
            displayMessage("Erro ao carregar receita.", true);
          });
      });
    })
    .catch((error) => {
      console.error("Erro ao carregar favoritos:", error);
      displayMessage("Erro ao carregar favoritos.", true);
    });
}

9-

# FAQ

**1. Pergunta:** “Como as receitas são geradas?”
- **Resposta:** Utilizando o banco de dados original do KitchenCompanion.

**2. Pergunta:** “Como gerar a receita?”
- **Resposta:** Acesse a página inicial e clique em "Gerar uma receita" no menu superior. Depois, escolha, com base nos seus ingredientes disponíveis, uma proteína, um carboidrato e um vegetal. Então, clique em "Gerar receita" e será possível visualizar o nome e o modo de preparo em uma página exclusiva para isso.

**3. Pergunta:** “Posso me cadastrar na página?”
- **Resposta:** Sim, além disso, cadastrar-se na página oferece uma experiência mais rica, pois aumenta a possibilidade de interações com as receitas do usuário.

**4. Pergunta:** “Após ter feito o login, posso editar meus dados?”
- **Resposta:** Sim, após fazer o login, é possível editar seus dados na página de perfil do usuário, em "Configurações". Dessa forma, é possível alterar o nome, e-mail e senha cadastrados.

**5. Pergunta:** “As receitas que gerei ficam salvas em algum lugar?”
- **Resposta:** Sim, se o usuário estiver cadastrado na página, ao gerar uma receita e clicar em "Visualizar", as receitas ficam salvas na parte de "Histórico".

**6. Pergunta:** “Existe uma maneira de guardar as receitas?”
- **Resposta:** Sim, é possível favoritar uma receita para acessá-la mais rapidamente quando necessário. Estas receitas ficam salvas na página de "Favoritos" no perfil do usuário.

# Referências Bibliográficas

(referências bibliográficas utilizadas no projeto; escrever aqui depois)
